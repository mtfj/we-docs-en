
.. _pki-description:

PKI
=======

Инфраструктура публичных ключей (PKI - Public Key Infrastructure) предназначена для безопасного обмена данными между пользователями. В основе инфраструктуры лежат цифровые сертификаты, связывающие приватный и публичный ключи пользователя. Подробнее про PKI можно почитать на `Wikipedia <https://en.wikipedia.org/wiki/Public_key_infrastructure>`_.

Схема PKI в блокчейн-платформе Vostok
------------------------------------------

.. figure:: img/pki-scheme.png
          :scale: 100 %
          :align: center
          :figwidth: 100 %
          :alt: Схема взаимодействия в PKI

          Схема взаимодействия в PKI

Инфраструктура публичных ключей, использующаяся в блокчейне Vostok, включает в себя следующие базовые компоненты:

* Удостоверяющий центр (Certification Authority) - точка доверия, ответственная за создание сертификатов ключей пользователей.
* Администратор УЦ (CA Administrator) - сотрудник, обечпечивающий управление службами УЦ и выпуск сертификатов.
* Пользователь - владелец сертификата, или субъект, запрашивающий сертификат.
* Блокчейн Vostok.

Удостоверяющим центром может быть как отдельный сервер с установленным ПО `УЦ ПАК «КриптоПро УЦ 2.0» <https://www.cryptopro.ru/products/ca/2.0>`_, так и отдельная организация, специализирующаяся в таком виде деятельности. Также пользователь может взаимодействовать как с администратором УЦ, так и со структурой УЦ напрямую.

Для обмена информацией с УЦ используется защищённый канал TLS с двухсторонней аутентификацией. 

Работа с PKI
-------------------

Общий алгоритм работы с PKI состоит из слелующих этапов:

1. Пользователь готовит персональные для получения сертификата. Для физического лица такими данными могут быть ФИО, из которых формируется ``commonName`` как идентификатор пользователя. Для юридических лиц это может быть наименование организации и её адрес.
2. Пользователь отправляет данные в УЦ для создания сертификата в формате ``*.req``. Администратор передаёт данные о запросе в УЦ, где на основе предоставленных данных центр создаёт сертификат пользователя.
3. Пользователь получает сертификат в формате ``*.cer`` от администратора УЦ или самого УЦ.
4. При помощи ПО `"СКЗИ КриптоПро JCP 2.0" <https://www.cryptopro.ru/products/csp/jcp>`_ пользователь помещает сертификат в криптоконтейнер и передаёт его на ноду в keystore.
5. Далее пользователь может применять методы API :ref:`PKI <pki-api>` для использования ЭП.
















