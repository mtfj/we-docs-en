.. _anchoring:

Анкоринг
================
В приватном блокчейне транзакции обрабатывает определенный список участников, каждый из которых заранее известен. Малое, по сравнению с публичным, количество участников блоков и транзакций в приватном блокчейне несёт угрозу подмены информации. Перезапись цепочки блоков и транзакций, особенно в случае использования PoS консенсуса, становится реальной.

Для повышения доверия участников приватного блокчейна к размещенным в нём данным разработан механизм анкоринга. Анкоринг позволяет проверить данные на неизменность. Гарантия неизменности достигается публикацией данных из приватного блокчейна в более крупную сеть, где подмена данных маловероятна из-за большего количества участников и блоков. Публикуемые данные — хеш от блоков приватной сети.

Анкоринг работает следующим образом:

1. В конфигурационном файле указывается период анкоринга: раз в 10 блоков, раз в 100 блоков или иной.
2. Приватный блокчейн начинает регулярно создавать транзакции с данными в основной сети. Данные содержат хеш блока приватной сети и его высоту.
3. Нода приватной сети дожидается подтверждения успешной записи транзакции от основной сети, и получает идентификатор этой транзакции с данными.
4. Затем, в приватной сети публикуется такая же транзакция с данными, дополнительно содержащая идентификатор транзакции с этими данными в основной сети.

Взаимная связность двух и более сетей повышает их стойкость, т.к. для подлога или изменнения данных в результате `long-range атаки <https://medium.com/@abhisharm/understanding-proof-of-stake-through-its-flaws-part-3-long-range-attacks-672a3d413501/>`_  необходимо атаковать все связанные сети.
